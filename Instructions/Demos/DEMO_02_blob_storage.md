---
demo:
  title: 'デモ 02: Blob Storage を作成して構成する'
  module: Guided Project - Azure Files and Azure Blobs
---


## デモ - Blob Storage を作成して構成する。

このデモでは、Blob Storage について説明します。

## Blob Storage の設定を確認する

1. [補助スライド] デモを開始する前に、Blob Storage の使用法と構成を確認します。 Blob Storage が必要になるビジネス グループはどれですか?

1. **Azure portal** にアクセスします。

1. 以前のストレージ アカウントを引き続き使用できます。 

1. **[概要]** タブを選択します。

1. [補助スライド] **[BLOB サービス]** セクションで、**[既定のアクセス層]** 設定を強調表示します。 企業コンテンツがホット アクセス層でどのように存在するかについて説明します。 監査情報はクール層にある可能性があります。 ログまたは季節のマーケティング資料は、アーカイブ層に含まれる可能性があります。 [BLOB ストレージのアクセス層](https://docs.microsoft.com/azure/storage/blobs/access-tiers-overview)に関する詳細を確認します。

1. [補助スライド] **[BLOB サービス]** セクションで、**[論理的な削除]** 設定を強調表示します。 これは、何かが誤って削除または上書きされた場合に備えて、パブリック Web サイトにとって重要です。 学生はラボで論理的な削除を練習します。 [BLOB の論理的な削除](https://learn.microsoft.com/azure/storage/blobs/soft-delete-blob-overview)に関する詳細を確認します。

1. **[BLOB サービス]** セクションで、**[バージョン管理]** 設定を指摘します。 これはマーケティング部門にとって重要な場合があります。 製品資料を追跡する必要がある場合があります。

## BLOB コンテナーを作成し、ファイルをアップロードし、アクセスを構成します。

1. ストレージ アカウントで、**[データ ストレージ]** ブレードを見つけます。

1. **[コンテナー]** を選択し **[+ コンテナー]** を選択します。

1. 新しいコンテナーの**名前**、
2. **public** を指定します。 これは、パブリック Web サイト用のストレージです。

1. アクセス レベルを**コンテナー (コンテナーと BLOB の匿名読み取りアクセス)** に設定します。 アクセス レベルについて簡単に説明します。 これについては、最後のデモで詳しく説明します。 

1. **［作成］** を選択します

1. コンテナーがデプロイされるのを待ってから、**public** コンテナーで作業を続行します。

1. **BLOB をアップロードする**。 時間があれば、オプションについて説明します。 

1. **アップロードしたファイル**を選択し、**URL をコピーします**。

1. **新しいブラウザー タブ**を開き、URL を貼り付け、アップロードされたファイルが表示されることを確認します。

1. **public** コンテナーに戻り、**アクセス レベル**を**プライベート (匿名アクセスなし)** に変更します。

1. **[URL] タブを更新し**、リソースへのアクセスが **拒否**されたことを確認します。

## ライフサイクル管理を構成する。

1. [補助スライド] ライフサイクル管理の説明から始めます。 マーケティング グループには、季節ごとの製品資料があります。 たとえば、冬服やアクセサリー ラインなどです。 このコンテンツは、次のシーズンまでアーカイブできます。 コンテンツのアーカイブは、ライフサイクル管理ルールを使用して簡単に実行できます。 [BLOB ライフサイクル管理ポリシー](https://learn.microsoft.com/azure/storage/blobs/lifecycle-management-overview)に関する詳細を確認します。

1. ストレージ アカウントで作業を続けます。

1. **[データ管理]** ブレードで、**[ライフサイクル管理]** を選択します。

1. **[詳細]** タブで、ルールに **movetoarchive** という名前を付けます。

1. **ルール スコープ**とフィルターを使用して BLOB を制限する **方法について説明します**。 たとえば、特定のコンテナー内のコンテンツのみを移動します。

1. **[ベース BLOB]** タブに移動します。

1. 数日前に最後に変更または作成されたものに基づいて、ルールが BLOB を自動的に移動する方法について説明します。

1. **[次へ]** ドロップダウンを開き、オプションについて説明します。 ラボ シナリオに基づいて例を示してみてください。 たとえば、IT 部門では、BLOB がテスト アカウントであるため、30 日後に削除する必要がある場合があります。

## コンテンツへの制限付きアクセスを構成します。

1. アクセスが制限されている場合は、使用事例を確認します。 たとえば、企業コンテンツはサード パーティのベンダーやパートナーと共有する必要があります。 アクセスは、特定の期間とアクション (読み取り、書き込み) に制限される場合があります。 [Shared Access Signatures](https://learn.microsoft.com/azure/storage/common/storage-sas-overview) に関する詳細を確認します。

1. **ストレージ アカウント**で続けます。

1. **[セキュリティとネットワーク]** ブレードで、**[Shared Access Signature]** を選択します。

1. **許可されているサービス**と**許可されているリソースの種類**を確認します。 SAS のスコープをストレージ アカウント、コンテナー、ファイル、または個々の BLOB ファイルに設定できることを説明します。

1. **許可されているアクセス許可**を確認します。

1. **[BLOB とコンテナー]** と **[読み取り]** を選択します。

1. **開始日時**と**有効期限の日時**の設定を確認します。

1. **[SAS と接続文字列を生成する]** を選択します。

1. 変更内容を**保存**します。 

1. **BLOB サービスの SAS URL を**新しいブラウザー タブにコピーします。

1. これがプライベート コンテナーであっても、コンテンツがどのように表示されるかについて説明します。

## BLOB オブジェクト レプリケーションを構成する。 

1. [補助スライド] デモを続行する前に、BLOB オブジェクト レプリケーションの使用事例を確認します。 たとえば、パブリック Web サイトのコンテンツをバックアップする必要があります。 ストレージ アカウントは異なる Azure リージョンに存在する可能性がありますが、必須ではないことを説明します。 [オブジェクト レプリケーション](https://learn.microsoft.com/azure/storage/blobs/object-replication-overview)に関する詳細を確認します。

1. **新しい**ストレージ アカウントを作成します。

1. ストレージ アカウントに**コンテナー**、**バックアップ**を**作成**します。

1. 最初のストレージ アカウントと **public** コンテナーに戻ります。 

1. **[データ管理]** ブレードで、**[オブジェクト レプリケーション]** を選択します。

1. **[レプリケーション ルールの作成]** を選択します。

    - 宛先ストレージ アカウント: 2 番目のストレージ アカウント

    - ソース コンテナー: **public**

    - 宛先コンテナー: **backup**

1. ルールを**作成**します。 ソース コンテナーがレプリケートされるまでに 5 から 10 分かかる場合があることを説明します。 学生にはラボ中にその時間がかかることを説明します。 

> **注**: 学生は LAB_02a と LAB_02a を完了できるようになりました。 

  
